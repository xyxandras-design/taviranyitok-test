<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self'; script-src 'self' 'unsafe-inline';">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="format-detection" content="telephone=no">
<title>Távirányító kereső</title>
<link rel="stylesheet" href="css/style.css">
<style>
  .search-row {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 10px;
  }
  .search-col {
    flex: 1 1 45%;
    min-width: 220px;
    box-sizing: border-box;
  }
  .search-col input, .search-col select {
    width: 100%;
    padding: 8px;
    border: 1px solid #006666;
    border-radius: 6px;
    font-size: 1rem;
    box-sizing: border-box;
  }
  #searchSuggestions div {
    padding: 6px 10px;
    cursor: pointer;
    border-bottom: 1px solid #ddd;
  }
  #searchSuggestions div:hover {
    background-color: #f0f0f0;
  }
  .info-box {
  padding: 15px; /* belső margó */
  background-color: #006666; /* világos szürke háttér */
  border: 1px solid #006666; /* kiemelő szegély */
  border-radius: 6px;
  box-sizing: border-box;
  margin-top: 10px;
}
</style>
</head>
<body>

<div class="container">

<header>
  <div class="header-container">
    <div class="header-center">
      <h1>Távirányító kereső</h1>
      <p>Mobil: +36-30-7562289 /Viber/</p>
    </div>
  </div>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="informacio.html">Információ</a>
  <a href="rc-ic.html">RC-IC</a>
  <a href="pic-es_tema.html">PIC-es téma</a>
  <a href="adatok.html">Adatok</a>
  <a href="erdekes.html">Érdekes</a>
  <a href="specialis.html">Speciális</a>
  <a href="kapcsolat.html">Kapcsolat</a>
  <a href="https://www.taviranyitok.hu" target="_blank" rel="noopener noreferrer">Webáruház</a>
</nav>

<div class="info-box">
  <p>Itt írhatod a részletes útmutatót a kereséshez. Például hogy modellszám vagy távirányító típus alapján kereshetnek. A bal oldali mező a gyártó kiválasztására, a jobb oldali a keresett típusra szolgál.</p>
</div>

<!-- Keresőblokk -->
<div class="search-row info-box">

  <div class="search-col">
    <label for="manufacturerSelect"><strong>Gyártó:</strong></label><br>
    <select id="manufacturerSelect">
      <option value="">Válassz gyártót...</option>
      <option value="celcus">Celcus</option>
      <option value="digihome">Digihome</option>
      <option value="dimarson">Dimarson</option>
      <option value="gogen">Gogen</option>
      <option value="orion-dvd">Orion-DVD</option>
      <option value="panasonic">Panasonic</option>
      <option value="samsung">Samsung</option>
      <option value="sony">Sony</option>
      <option value="telefunken">Telefunken</option>
      <option value="lg">LG</option>
      <option value="hisense">Hisense</option>
      <option value="navon">Navon</option>
    </select>
  </div>

  <div class="search-col">
    <label for="modelSearch"><strong>Modellszám vagy típus:</strong></label><br>
    <input id="modelSearch" type="text" placeholder="Írj be modellszámot vagy típust...">
    <div id="searchSuggestions" style="margin-top:5px;"></div>
  </div>

</div>

<footer>
  (c) 2007 Varga András. IR-99 BT. Minden jog fenntartva!
</footer>

</div>

<script>
const manufacturer = document.getElementById("manufacturerSelect");
const input = document.getElementById("modelSearch");
const box = document.getElementById("searchSuggestions");

let currentData = [];

// Gyártóválasztáskor betöltjük a JSON fájlt
manufacturer.addEventListener("change", () => {
  const gyarto = manufacturer.value.toLowerCase();
  box.innerHTML = "";
  input.value = "";
  currentData = [];

  if(!gyarto) return;

  fetch(`json/${gyarto}_adatok.json`)
    .then(resp => resp.json())
    .then(data => { currentData = data; })
    .catch(err => {
      console.error("Hiba a JSON betöltésekor:", err);
      box.innerHTML = "<div>Nem sikerült betölteni az adatokat.</div>";
    });
});

// Keresés a kiválasztott gyártó adatain belül
input.addEventListener("input", () => {
  const query = input.value.toLowerCase().trim();
  box.innerHTML = "";

  if(query.length < 2 || !currentData.length) return;

  const filtered = currentData.filter(item => 
    item.tipus.toLowerCase().includes(query) || item.device.toLowerCase().includes(query)
  ).slice(0, 10);

  if(filtered.length === 0) {
    box.innerHTML = "<div>Nincs találat.</div>";
    return;
  }

  filtered.forEach(item => {
    const div = document.createElement("div");
    div.textContent = `${item.gyarto.toUpperCase()} - ${item.tipus} (${item.device})`;
    div.addEventListener("click", () => {
      window.location.href = item.html;
    });
    box.appendChild(div);
  });
});
</script>

</body>
</html>
