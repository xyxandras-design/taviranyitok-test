<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self'; script-src 'self' 'unsafe-inline';">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="format-detection" content="telephone=no">
<title>Távirányító kereső</title>
<link rel="stylesheet" href="css/style.css">
<style>
  .search-row {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 10px;
  }
  .search-col {
    flex: 1 1 45%;
    min-width: 220px;
    box-sizing: border-box;
  }
  .search-col input, .search-col select {
    width: 100%;
    padding: 8px;
    border: 1px solid #006666;
    border-radius: 6px;
    font-size: 1rem;
    box-sizing: border-box;
  }
  #searchSuggestions div {
    padding: 6px 10px;
    cursor: pointer;
    border-bottom: 1px solid #ddd;
  }
  #searchSuggestions div:hover {
    background-color: #f0f0f0;
  }
  .info-box {
  padding: 15px; /* belső margó */
  background-color: #006666; /* világos szürke háttér */
  border: 1px solid #006666; /* kiemelő szegély */
  border-radius: 6px;
  box-sizing: border-box;
  margin-top: 10px;
}
</style>
</head>
<body>

<div class="container">

<header>
  <div class="header-container">
    <div class="header-center">
      <h1>Távirányító kereső</h1>
      <p>Mobil: +36-30-7562289 /Viber/</p>
    </div>
  </div>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="informacio.html">Információ</a>
  <a href="rc-ic.html">RC-IC</a>
  <a href="pic-es_tema.html">PIC-es téma</a>
  <a href="adatok.html">Adatok</a>
  <a href="erdekes.html">Érdekes</a>
  <a href="specialis.html">Speciális</a>
  <a href="kapcsolat.html">Kapcsolat</a>
  <a href="https://www.taviranyitok.hu" target="_blank" rel="noopener noreferrer">Webáruház</a>
</nav>

<div class="info-box">
  <p>Itt írhatod a részletes útmutatót a kereséshez. Például hogy modellszám vagy távirányító típus alapján kereshetnek. A bal oldali mező a gyártó kiválasztására, a jobb oldali a keresett típusra szolgál.</p>
</div>

<!-- Keresőblokk -->
<div class="search-row info-box">

  <div class="search-col">
    <label for="manufacturerSelect"><strong>Gyártó:</strong></label><br>
    <select id="manufacturerSelect">
      <option value="">Válassz gyártót...</option>
      <option value="celcus">Celcus</option>
      <option value="digihome">Digihome</option>
      <option value="dimarson">Dimarson</option>
      <option value="gogen">Gogen</option>
      <option value="hisense">Hisense</option>
      <option value="orion-dvd">Orion-DVD</option>
      <option value="panasonic">Panasonic</option>
      <option value="samsung">Samsung</option>
      <option value="sony">Sony</option>
      <option value="telefunken">Telefunken</option>
      <option value="lg">LG</option>
      <option value="hisense">Hisense</option>
      <option value="navon">Navon</option>
    </select>
  </div>

  <div class="search-col">
    <label for="modelSearch"><strong>Modellszám vagy típus:</strong></label><br>
    <input id="modelSearch" type="text" placeholder="Írj be modellszámot vagy típust...">
    <div id="searchSuggestions" style="margin-top:5px;"></div>
  </div>

</div>

<footer>
  (c) 2007 Varga András. IR-99 BT. Minden jog fenntartva!
</footer>

</div>

<script>

const manufacturerFiles = {
  sony: "json/sony_adatok.json",
  panasonic: "json/panasonic_adatok.json",
  samsung: "json/samsung_adatok.json",
  hisense: "json/hisense_adatok.json",
  navon: "json/navon_adatok.json",
  celcus: "json/celcus_adatok.json",
  lg: "json/lg_adatok.json"
};

const manufacturer = document.getElementById("manufacturerSelect");
const input = document.getElementById("modelSearch");
const box = document.getElementById("searchSuggestions");

let currentData = [];

// Gyártó kiválasztása
manufacturer.addEventListener("change", () => {
  const selected = manufacturer.value;
  if (!selected) {
    currentData = [];
    input.value = "";
    box.innerHTML = "";
    return;
  }

  fetch(manufacturerFiles[selected])
    .then(res => res.json())
    .then(data => {
      currentData = data;
      input.value = "";
      box.innerHTML = "";
    })
    .catch(err => {
      console.error("JSON betöltési hiba:", err);
      box.innerHTML = "<p>Nem sikerült betölteni az adatokat.</p>";
    });
});

// Keresés modellszám vagy típus alapján
input.addEventListener("input", () => {
  const q = input.value.toLowerCase().trim();
  box.innerHTML = "";

  if (q.length < 2 || !currentData.length) return;

  const filtered = currentData
    .filter(item => 
      item.tipus.toLowerCase().includes(q) || 
      item.device.toLowerCase().includes(q)
    )
    .slice(0, 10);

  if (filtered.length === 0) {
    box.innerHTML = "<p>Nincs találat.</p>";
    return;
  }

  filtered.forEach(item => {
    const div = document.createElement("div");
    div.textContent = item.tipus; /* Ez a sor állítja be, hogy a megjelenő listában milyen adatok kerüljenek kiírásra. */

    div.addEventListener("click", () => {
      // Gyártói könyvtár + HTML fájl
      const folderName = item.gyarto.toLowerCase() + "-taviranyitok";
      const url = `${folderName}/${item.html}`;
      window.location.href = url;
    });

    box.appendChild(div);
  });
});

</script>

</body>
</html>
